<%= form_for([@version.volume.book, @version.volume, @version]) do |f| %>
  <% if @version.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@version.errors.count, "error") %> prohibited this version from being saved:</h2>

      <ul>
      <% @version.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <table class="table">
    <tbody>
      <tr>
        <td><%= f.label :label %></td>
        <td><%= f.text_field :label %></td>
      </tr>
      <tr>
        <td><%= f.label :manifest %></td>
        <td><%= f.collection_select :iiif_manifest_id, @iiif_manifests, :id, :uri, { prompt: true }, { required: true } %></td>
      </tr>
      <tr>
        <td><%= f.label :contributing_library %></td>
        <td><%= f.collection_select :contributing_library_id, @contributing_libraries, :id, :label, { prompt: true }, { required: true } %></td>
      </tr>
      <tr>
        <td><%= f.label :owner_call_number %></td>
        <td><%= f.text_field :owner_call_number %></td>
      </tr>
      <tr>
        <td><%= f.label :owner_system_number %></td>
        <td><%= f.text_field :owner_system_number %></td>
      </tr>
      <tr>
        <td><%= f.label :other_number %></td>
        <td><%= f.text_field :other_number %></td>
      </tr>
      <tr>
        <td><%= f.label :version_edition_statement %></td>
        <td><%= f.text_field :version_edition_statement %></td>
      </tr>
      <tr>
        <td><%= f.label :version_publication_statement %></td>
        <td><%= f.text_field :version_publication_statement %></td>
      </tr>
      <tr>
        <td><%= f.label :version_publication_date %></td>
        <td><%= f.text_field :version_publication_date %></td>
      </tr>
      <tr>
        <td><%= f.label :additional_responsibility %></td>
        <td><%= f.text_field :additional_responsibility %></td>
      </tr>
      <tr>
        <td><%= f.label :provenance %></td>
        <td><%= f.text_field :provenance %></td>
      </tr>
      <tr>
        <td><%= f.label :physical_characteristics %></td>
        <td><%= f.text_field :physical_characteristics %></td>
      </tr>
      <tr>
        <td><%= f.label :rights %></td>
        <td><%= f.text_field :rights %></td>
      </tr>
      <tr>
        <td><%= f.label :based_on_original %></td>
        <td><%= f.check_box :based_on_original %></td>
      </tr>
    </tbody>
  </table>

  <%= f.hidden_field(:volume_id, value: @version.volume_id) %>

  <div class="actions">
    <%= f.submit(class: 'btn btn-primary') %>
    <% if @version.new_record? %>
      <%= link_to 'Back to Book', book_path(@version.volume.book), class: 'btn btn-default' %>
    <% else %>
      <%= link_to 'Cancel', book_volume_version_path(@version.volume.book, @version.volume, @version), class: 'btn btn-default' %>
    <% end %>
  </div>
<% end %>
